- name: Copy snmp configuration file
  ansible.builtin.copy:
    src: snmpd.conf
    dest: /usr/local/etc/snmp/snmpd.conf
  vars:
    ansible_connection: local
  become: True
  run_once: True

- name: Copy the snmpd service file
  ansible.builtin.copy:
    src: snmpd.service
    dest: /etc/systemd/system/snmpd.service
  vars:
    ansible_connection: local
  become: True
  run_once: True
  

- name: Run the snmpd daemon
  ansible.builtin.service: 
    name: snmpd
    state: started
  vars:
    ansible_connection: local
  become: True
  run_once: True

- name: Run the snmpd daemon
  ansible.builtin.command: snmpwalk -v 2c -c public 127.0.0.1 .1.3.6.1.2.1
  vars:
    ansible_connection: local
  become: True
  run_once: True


